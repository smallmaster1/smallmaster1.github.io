(function(r){r.fn.barrager=function(a){a=r.extend({close:true,bottom:0,max:10,speed:8,color:"#fff",old_ie_color:"#000000"},a||{});var e=(new Date).getTime();var o="barrage_"+e;var i="#"+o;var t=r("<div class='barrage' id='"+o+"'></div>").appendTo(r(this));var n=r(window).height()-100;var d=n>this.height()?this.height():n;var s=r(window).width()+500;var v=s>this.width()?this.width():s;var g=a.bottom==0?Math.floor(Math.random()*d+40):a.bottom;t.css("bottom",g+"px");div_barrager_box=r("<div class='barrage_box cl'></div>").appendTo(t);if(a.img){div_barrager_box.append("<a class='portrait z' href='javascript:;'></a>");var c=r("<img src='' >").appendTo(i+" .barrage_box .portrait");c.attr("src",a.img)}div_barrager_box.append(" <div class='z p'></div>");if(a.close){div_barrager_box.append(" <div class='close z'></div>")}var b=r("<a title='' href='' target='_blank'></a>").appendTo(i+" .barrage_box .p");b.attr({href:a.href,id:a.id}).empty().append(a.info);if(navigator.userAgent.indexOf("MSIE 6.0")>0||navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0){b.css("color",a.old_ie_color)}else{b.css("color",a.color)}var p=0;t.css("margin-right",0);r(i).animate({right:v},a.speed*1e3,function(){r(i).remove()});div_barrager_box.mouseover(function(){r(i).stop(true)});div_barrager_box.mouseout(function(){r(i).animate({right:v},a.speed*1e3,function(){r(i).remove()})});r(i+".barrage .barrage_box .close").click(function(){r(i).remove()})};r.fn.barrager.removeAll=function(){r(".barrage").remove()}})(jQuery);